"use strict";(()=>{var Yt=Object.create;var tt=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var et=(s=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(s,{get:(u,d)=>(typeof require!="undefined"?require:u)[d]}):s)(function(s){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+s+'" is not supported')});var ie=(s,u)=>()=>(u||s((u={exports:{}}).exports,u),u.exports);var oe=(s,u,d,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let y of ee(u))!re.call(s,y)&&y!==d&&tt(s,y,{get:()=>u[y],enumerable:!(f=te(u,y))||f.enumerable});return s};var nt=(s,u,d)=>(d=s!=null?Yt(ne(s)):{},oe(u||!s||!s.__esModule?tt(d,"default",{value:s,enumerable:!0}):d,s));var rt=ie(()=>{"use strict";(()=>{var s=Object.defineProperty,u=Object.defineProperties,d=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,P=(t,e,n)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g=(t,e)=>{for(var n in e||(e={}))y.call(e,n)&&P(t,n,e[n]);if(f)for(var n of f(e))ut.call(e,n)&&P(t,n,e[n]);return t},E=(t,e)=>u(t,d(e)),D="https://unifyintent.com/analytics/api/v1",ct=/^[A-Za-z0-9._+%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$/;function T(t,e){var n;return((n=e==null?void 0:e.getTime())!=null?n:new Date().getTime())+t*60*1e3}var O=()=>({path:window.location.pathname,query:lt(window.location.href),referrer:document.referrer,title:document.title,url:window.location.href}),B=()=>({userAgent:window.navigator.userAgent,userAgentData:window.navigator.userAgentData}),F=t=>{if(ct.test(t))return t},lt=t=>{let e=new URL(t).searchParams,n={};for(let[r,o]of e.entries())n[r]=o;return n},ht=()=>{var t,e,n,r,o;let i=new URL(location.href),a={source:(t=i.searchParams.get("utm_source"))!=null?t:void 0,medium:(e=i.searchParams.get("utm_medium"))!=null?e:void 0,campaign:(n=i.searchParams.get("utm_campaign"))!=null?n:void 0,term:(r=i.searchParams.get("utm_term"))!=null?r:void 0,content:(o=i.searchParams.get("utm_content"))!=null?o:void 0};return E(g({locale:navigator.language},B()),{utm:a})},dt=class{constructor(t){this.getBaseActivityPayload=()=>({type:this.getActivityType(),anonymousUserId:this._intentContext.identityManager.getOrCreateAnonymousUserId(),sessionId:this._intentContext.sessionManager.getOrCreateSession().sessionId,context:ht(),timestamp:new Date().toISOString()}),this._intentContext=t}track(){this._intentContext.apiClient.post(this.getActivityURL(),g(g({},this.getBaseActivityPayload()),this.getActivityData()))}},k=dt,ft=`${D}/page`,R=class extends k{constructor(){super(...arguments),this.getActivityData=()=>({type:"page",properties:O()})}getActivityType(){return"page"}getActivityURL(){return ft}},yt=`${D}/identify`,K=class extends k{constructor(t,{email:e}){super(t),this.getActivityData=()=>({type:"identify",traits:{email:this._email}}),this._email=e}getActivityType(){return"identify"}getActivityURL(){return yt}},A,pt=new Uint8Array(16);function gt(){if(!A&&(A=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!A))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return A(pt)}var c=[];for(let t=0;t<256;++t)c.push((t+256).toString(16).slice(1));function mt(t,e=0){return c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]}var vt=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),j={randomUUID:vt};function It(t,e,n){if(j.randomUUID&&!e&&!t)return j.randomUUID();t=t||{};let r=t.random||(t.rng||gt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=r[o];return e}return mt(r)}var M=It;function _(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var At={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function S(t,e){function n(o,i,a){if(typeof document!="undefined"){a=_({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var h="";for(var p in a)a[p]&&(h+="; "+p,a[p]!==!0&&(h+="="+a[p].split(";")[0]));return document.cookie=o+"="+t.write(i,o)+h}}function r(o){if(!(typeof document=="undefined"||arguments.length&&!o)){for(var i=document.cookie?document.cookie.split("; "):[],a={},h=0;h<i.length;h++){var p=i[h].split("="),Qt=p.slice(1).join("=");try{var U=decodeURIComponent(p[0]);if(a[U]=t.read(Qt,U),o===U)break}catch(le){}}return o?a[o]:a}}return Object.create({set:n,get:r,remove:function(o,i){n(o,"",_({},i,{expires:-1}))},withAttributes:function(o){return S(this.converter,_({},this.attributes,o))},withConverter:function(o){return S(_({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var L=S(At,{path:"/"}),m=typeof Buffer=="function",z=typeof TextDecoder=="function"?new TextDecoder:void 0,V=typeof TextEncoder=="function"?new TextEncoder:void 0,_t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",v=Array.prototype.slice.call(_t),w=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(v),wt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),Z=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),Ct=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),H=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),St=t=>{let e,n,r,o,i="",a=t.length%3;for(let h=0;h<t.length;){if((n=t.charCodeAt(h++))>255||(r=t.charCodeAt(h++))>255||(o=t.charCodeAt(h++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|o,i+=v[e>>18&63]+v[e>>12&63]+v[e>>6&63]+v[e&63]}return a?i.slice(0,a-3)+"===".substring(a):i},N=typeof btoa=="function"?t=>btoa(t):m?t=>Buffer.from(t,"binary").toString("base64"):St,bt=m?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let n=0,r=t.length;n<r;n+=4096)e.push(l.apply(null,t.subarray(n,n+4096)));return N(e.join(""))},xt=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?l(192|e>>>6)+l(128|e&63):l(224|e>>>12&15)+l(128|e>>>6&63)+l(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return l(240|e>>>18&7)+l(128|e>>>12&63)+l(128|e>>>6&63)+l(128|e&63)}},Ut=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Pt=t=>t.replace(Ut,xt),$=m?t=>Buffer.from(t,"utf8").toString("base64"):V?t=>bt(V.encode(t)):t=>N(Pt(t)),q=(t,e=!1)=>e?Ct($(t)):$(t),Et=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Dt=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return l((n>>>10)+55296)+l((n&1023)+56320);case 3:return l((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return l((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Tt=t=>t.replace(Et,Dt),Ot=t=>{if(t=t.replace(/\s+/g,""),!wt.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",r,o;for(let i=0;i<t.length;)e=w[t.charAt(i++)]<<18|w[t.charAt(i++)]<<12|(r=w[t.charAt(i++)])<<6|(o=w[t.charAt(i++)]),n+=r===64?l(e>>16&255):o===64?l(e>>16&255,e>>8&255):l(e>>16&255,e>>8&255,e&255);return n},J=typeof atob=="function"?t=>atob(H(t)):m?t=>Buffer.from(t,"base64").toString("binary"):Ot,Bt=m?t=>Z(Buffer.from(t,"base64")):t=>Z(J(t).split("").map(e=>e.charCodeAt(0))),Ft=m?t=>Buffer.from(t,"base64").toString("utf8"):z?t=>z.decode(Bt(t)):t=>Tt(J(t)),kt=t=>H(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),Rt=t=>Ft(kt(t)),b="test";function W(t){return q(JSON.stringify(t))}function Kt(t){return JSON.parse(Rt(t))}function jt(){try{return localStorage.setItem(b,b),localStorage.removeItem(b),!0}catch(t){return!1}}var Mt=class{constructor(t){this.get=e=>{let n=this.retrieveValue(this.buildKey(e));return n?Kt(n):null},this.set=(e,n)=>{this.storeValue(this.buildKey(e),W(n))},this.buildKey=e=>W(`${this._writeKey}_${e}`),this._writeKey=t}},G=Mt,Lt=class extends G{retrieveValue(t){var e;return(e=L.get(t))!=null?e:null}storeValue(t,e){L.set(t,e)}},zt=class extends G{constructor(t){super(t),this.retrieveValue=e=>this._localStorageAvailable?localStorage.getItem(e):null,this.storeValue=(e,n)=>{this._localStorageAvailable&&localStorage.setItem(e,n)},this._localStorageAvailable=jt()}},X="anonymousUserId",Vt=class{constructor(t){this.getOrCreateAnonymousUserId=()=>{if(this._anonymousUserId)return this._anonymousUserId;let e=this.getAnonymousUserId()||this.createAnonymousUserId();return this._anonymousUserId=e,e},this.getAnonymousUserId=()=>this._storageService.get(X),this.createAnonymousUserId=()=>{let e=M();return this._storageService.set(X,e),e},this._storageService=new Lt(t),this._anonymousUserId=null}},Q="clientSession",Y=30,Zt=class{constructor(t){this.getOrCreateSession=()=>this.getAndUpdateSession()||this.createSession(),this.getAndUpdateSession=()=>{let e=this._currentSession||this.getStoredSession();if(e&&e.expiration>new Date().getTime())return this.updateSessionExpiration(e)},this.createSession=(e=Y)=>{let n=g({sessionId:M(),startTime:new Date,expiration:T(e),initial:O()},B());return this._currentSession=n,this.setStoredSession(n),n},this.updateSessionExpiration=(e,n=Y)=>{let r=E(g({},e),{expiration:T(n)});return this._currentSession=r,this.setStoredSession(r),r},this.getStoredSession=()=>this._storageService.get(Q),this.setStoredSession=e=>{this._storageService.set(Q,e)},this._writeKey=t,this._storageService=new zt(this._writeKey),this._currentSession=null}},Ht=class{constructor(t){this.post=(e,n)=>{let r=JSON.stringify(n),o=this.getAuthString(this._writeKey);if(fetch)fetch(e,{method:"POST",body:r,credentials:"include",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.getAuthString(this._writeKey)},keepalive:!0}).catch(()=>{});else{let i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-type","application/json; charset=UTF-8"),i.setRequestHeader("Authorization",o),i.send(r)}},this._writeKey=t}getAuthString(t){return`Basic ${q(t+":")}`}},Nt=Ht,$t=class{constructor(t){this.startAutoPage=()=>{this._historyMonitored||this.monitorHistory(),this._autoPage=!0},this.stopAutoPage=()=>{this._autoPage=!1},this.startAutoIdentify=()=>{this._autoIdentify=!0,this.refreshMonitoredInputs(),setInterval(this.refreshMonitoredInputs,2e3)},this.stopAutoIdentify=()=>{this._monitoredInputs.forEach(r=>{r.isConnected&&(r.removeEventListener("blur",this.handleInputBlur),r.removeEventListener("keydown",this.handleInputKeydown))}),this._monitoredInputs.clear(),this._autoIdentify=!1},this.monitorHistory=()=>{let r=history.pushState;history.pushState=(...i)=>{r.apply(history,i),this.maybeTrackPage()};let o=history.replaceState;history.replaceState=(...i)=>{let a=g({},window.location);o.apply(history,i),qt(a,window.location)&&this.maybeTrackPage()},window.addEventListener("popstate",()=>{this.maybeTrackPage()}),this._historyMonitored=!0},this.maybeTrackPage=()=>{this._autoPage&&new R(this._intentContext).track()},this.refreshMonitoredInputs=()=>{this._autoIdentify&&(this._monitoredInputs.forEach(r=>{r.isConnected||this._monitoredInputs.delete(r)}),Array.from(document.getElementsByTagName("input")).filter(r=>!this._monitoredInputs.has(r)&&Jt(r)).forEach(r=>{r.addEventListener("blur",this.handleInputBlur),r.addEventListener("keydown",this.handleInputKeydown),this._monitoredInputs.add(r)}))},this.handleInputBlur=r=>{this._autoIdentify&&this.maybeIdentifyInputEmail(r)},this.handleInputKeydown=r=>{this._autoIdentify&&r.key==="Enter"&&this.maybeIdentifyInputEmail(r)},this.maybeIdentifyInputEmail=r=>{var o;if(!this._autoIdentify||!(r.target instanceof HTMLInputElement))return;let i=(o=r.target)==null?void 0:o.value;if(i){if(!F(i)||this._submittedEmails.has(i))return;new K(this._intentContext,{email:i}).track(),this._submittedEmails.add(i)}},this.__getMonitoredInputs=()=>this._monitoredInputs,this.__getSubmittedEmails=()=>this._submittedEmails;var e,n;this._intentContext=t,this._monitoredInputs=new Set,this._submittedEmails=new Set,this._autoPage=(e=t.clientConfig.autoPage)!=null?e:!1,this._autoIdentify=(n=t.clientConfig.autoIdentify)!=null?n:!1,this._historyMonitored=!1,this._autoPage&&(this.startAutoPage(),this.maybeTrackPage()),this._autoIdentify&&this.startAutoIdentify()}};function qt(t,e){return t.hostname!==e.hostname||t.pathname!==e.pathname}function Jt(t){return t.type==="email"||t.type==="text"}var x=$t,Wt={autoPage:!1,autoIdentify:!1},Gt=class{constructor(t,e=Wt){this.page=()=>{new R(this._context).track()},this.identify=i=>{let a=F(i);return a?(new K(this._context,{email:a}).track(),!0):!1},this.startAutoPage=()=>{this._intentAgent||(this._intentAgent=new x(this._context)),this._intentAgent.startAutoPage()},this.stopAutoPage=()=>{var i;(i=this._intentAgent)==null||i.stopAutoPage()},this.startAutoIdentify=()=>{this._intentAgent||(this._intentAgent=new x(this._context)),this._intentAgent.startAutoIdentify()},this.stopAutoIdentify=()=>{var i;(i=this._intentAgent)==null||i.stopAutoIdentify()},window.unify!==void 0&&!Array.isArray(window.unify)&&console.warn("Global UnifyIntentClient already exists, a new one will not be created.");let n=new Nt(t),r=new Zt(t);r.getOrCreateSession();let o=new Vt(t);o.getOrCreateAnonymousUserId(),this._context={writeKey:t,clientConfig:e,apiClient:n,sessionManager:r,identityManager:o},(e.autoPage||e.autoIdentify)&&(this._intentAgent=new x(this._context))}},Xt=Gt,ce=Xt})();});var it=nt(rt()),I=nt(et("react")),ae={client:null},C=I.default.createContext(ae);C.displayName="UnifyIntentContext";var se=({children:s,writeKey:u,config:d})=>{let[f]=(0,I.useState)(new it.default(u,d));return I.default.createElement(C.Provider,{value:{client:f}},s)},ot=se;var at=et("react");function ue(){let{client:s}=(0,at.useContext)(C);if(s===null)throw new Error("useUnifyIntent can only be used within a UnifyIntentProvider.");return s}var st=ue;var Oe={UnifyIntentProvider:ot,useUnifyIntent:st};})();
/*! Bundled license information:

@unifygtm/intent-client/dist/js/client/index.min.js:
  (*! Bundled license information:
  
  js-cookie/dist/js.cookie.mjs:
    (*! js-cookie v3.0.5 | MIT *)
  *)
*/
